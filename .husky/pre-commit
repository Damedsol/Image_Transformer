#!/bin/sh
# Run comprehensive checks before commit
echo "ğŸ” Running pre-commit checks..."
echo "ğŸ“‹ Checking code quality, formatting, and type safety..."

# Run TypeScript type checking first
echo "ğŸ”§ Running TypeScript type checking..."
pnpm type-check
if [ $? -ne 0 ]; then
    echo "âŒ TypeScript type checking failed. Please fix type errors before committing."
    echo "ğŸ’¡ Check the TypeScript errors above and fix them."
    exit 1
fi
echo "âœ… TypeScript type checking passed!"

# Run lint-staged for code quality and formatting
echo "ğŸ”§ Running lint and format checks on staged files..."
pnpm lint-staged

# Check if lint-staged succeeded
if [ $? -eq 0 ]; then
    echo "âœ… All checks passed! Code is ready for commit."
    echo "ğŸš€ Proceeding with commit..."
else
    echo "âŒ Lint checks failed. Please fix the issues before committing."
    echo "ğŸ’¡ Run 'pnpm lint:fix' to automatically fix some issues."
    exit 1
fi 